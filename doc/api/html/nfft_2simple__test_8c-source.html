<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
    <title>
      NFFT 3.0.2 API Reference - NFFT: simple_test.c Source File
    </title>
    <link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
  </head>
  <body>
    <table>
      <tr>
        <td valign="top">
          <img src="images/logo.png" alt="NFFT Logo">
        </td>
        <td align="left" valign="bottom" width="100%">
          <H1nc>3.0.2 API Reference</H1nc>
        </td>
      </tr>
    </table>  
<!-- Generated by Doxygen 1.4.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">examples</a>&nbsp;/&nbsp;<a class="el" href="dir_000018.html">nfft</a></div>
<h1>nfft/simple_test.c</h1><div class="fragment"><pre class="fragment">00001 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00002 <span class="preprocessor">#include &lt;math.h&gt;</span>
00003 <span class="preprocessor">#include &lt;string.h&gt;</span>
00004 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
00005 <span class="preprocessor">#include "<a class="code" href="util_8h.html">util.h</a>"</span>
00006 <span class="preprocessor">#include "<a class="code" href="nfft3_8h.html">nfft3.h</a>"</span>
00007 
00008 <span class="keywordtype">void</span> simple_test_nfft_1d()
00009 {
00010   <a class="code" href="structnfft__plan.html">nfft_plan</a> p;
00011 
00012   <span class="keywordtype">int</span> N=14;
00013   <span class="keywordtype">int</span> M=19;
00014 
00016   <a class="code" href="group__nfft.html#ga4">nfft_init_1d</a>(&amp;p,N,M);
00017 
00019   <a class="code" href="group__nfftutil.html#ga47">nfft_vrand_shifted_unit_double</a>(p.<a class="code" href="structnfft__plan.html#o14">x</a>,p.<a class="code" href="structnfft__plan.html#o1">M_total</a>);
00020 
00022   <span class="keywordflow">if</span>(p.<a class="code" href="structnfft__plan.html#o12">nfft_flags</a> &amp; <a class="code" href="group__nfft.html#ga27">PRE_ONE_PSI</a>)
00023       <a class="code" href="group__nfft.html#ga10">nfft_precompute_one_psi</a>(&amp;p);
00024 
00026   <a class="code" href="group__nfftutil.html#ga46">nfft_vrand_unit_complex</a>(p.<a class="code" href="structnfft__plan.html#o2">f_hat</a>,p.<a class="code" href="structnfft__plan.html#o0">N_total</a>);
00027   <a class="code" href="group__nfftutil.html#ga45">nfft_vpr_complex</a>(p.<a class="code" href="structnfft__plan.html#o2">f_hat</a>,p.<a class="code" href="structnfft__plan.html#o0">N_total</a>,<span class="stringliteral">"given Fourier coefficients, vector f_hat"</span>); 
00028 
00030   <a class="code" href="group__nfft.html#ga0">ndft_trafo</a>(&amp;p);
00031   <a class="code" href="group__nfftutil.html#ga45">nfft_vpr_complex</a>(p.<a class="code" href="structnfft__plan.html#o3">f</a>,p.<a class="code" href="structnfft__plan.html#o1">M_total</a>,<span class="stringliteral">"ndft, vector f"</span>); 
00032 
00034   <a class="code" href="group__nfft.html#ga2">nfft_trafo</a>(&amp;p);
00035   <a class="code" href="group__nfftutil.html#ga45">nfft_vpr_complex</a>(p.<a class="code" href="structnfft__plan.html#o3">f</a>,p.<a class="code" href="structnfft__plan.html#o1">M_total</a>,<span class="stringliteral">"nfft, vector f"</span>);
00036   
00038   <a class="code" href="group__nfft.html#ga1">ndft_adjoint</a>(&amp;p);
00039   <a class="code" href="group__nfftutil.html#ga45">nfft_vpr_complex</a>(p.<a class="code" href="structnfft__plan.html#o2">f_hat</a>,p.<a class="code" href="structnfft__plan.html#o0">N_total</a>,<span class="stringliteral">"adjoint ndft, vector f_hat"</span>);
00040 
00042   <a class="code" href="group__nfft.html#ga3">nfft_adjoint</a>(&amp;p);
00043   <a class="code" href="group__nfftutil.html#ga45">nfft_vpr_complex</a>(p.<a class="code" href="structnfft__plan.html#o2">f_hat</a>,p.<a class="code" href="structnfft__plan.html#o0">N_total</a>,<span class="stringliteral">"adjoint nfft, vector f_hat"</span>);
00044 
00046   <a class="code" href="group__nfft.html#ga15">nfft_finalize</a>(&amp;p);
00047 }
00048 
00049 <span class="keywordtype">void</span> simple_test_nfft_2d()
00050 {
00051   <span class="keywordtype">int</span> K,N[2],n[2];
00052   <span class="keywordtype">double</span> t;
00053 
00054   <a class="code" href="structnfft__plan.html">nfft_plan</a> p;
00055    
00056   N[0]=70; n[0]=128;
00057   N[1]=50; n[1]=128;
00058   K=12;
00059 
00060   t=<a class="code" href="group__nfftutil.html#ga0">nfft_second</a>();
00062   <a class="code" href="group__nfft.html#ga9">nfft_init_guru</a>(&amp;p, 2, N, N[0]*N[1], n, 4,
00063      PRE_PHI_HUT| PRE_PSI| MALLOC_F_HAT| MALLOC_X| MALLOC_F |
00064      FFTW_INIT| FFT_OUT_OF_PLACE,
00065      FFTW_ESTIMATE| FFTW_DESTROY_INPUT);
00066 
00068   <a class="code" href="group__nfftutil.html#ga47">nfft_vrand_shifted_unit_double</a>(p.<a class="code" href="structnfft__plan.html#o14">x</a>,p.<a class="code" href="structnfft__plan.html#o4">d</a>*p.<a class="code" href="structnfft__plan.html#o1">M_total</a>);
00069 
00071   <span class="keywordflow">if</span>(p.<a class="code" href="structnfft__plan.html#o12">nfft_flags</a> &amp; <a class="code" href="group__nfft.html#ga27">PRE_ONE_PSI</a>)
00072     <a class="code" href="group__nfft.html#ga10">nfft_precompute_one_psi</a>(&amp;p);
00073 
00075   <a class="code" href="group__nfftutil.html#ga46">nfft_vrand_unit_complex</a>(p.<a class="code" href="structnfft__plan.html#o2">f_hat</a>,p.<a class="code" href="structnfft__plan.html#o0">N_total</a>);
00076 
00077   t=<a class="code" href="group__nfftutil.html#ga0">nfft_second</a>()-t;
00078   <a class="code" href="group__nfftutil.html#ga45">nfft_vpr_complex</a>(p.<a class="code" href="structnfft__plan.html#o2">f_hat</a>,K,
00079               <span class="stringliteral">"given Fourier coefficients, vector f_hat (first few entries)"</span>);
00080   printf(<span class="stringliteral">" ... initialisation took %e seconds.\n"</span>,t);
00081 
00083   t=<a class="code" href="group__nfftutil.html#ga0">nfft_second</a>();
00084   <a class="code" href="group__nfft.html#ga0">ndft_trafo</a>(&amp;p);
00085   t=<a class="code" href="group__nfftutil.html#ga0">nfft_second</a>()-t;
00086   <a class="code" href="group__nfftutil.html#ga45">nfft_vpr_complex</a>(p.<a class="code" href="structnfft__plan.html#o3">f</a>,K,<span class="stringliteral">"ndft, vector f (first few entries)"</span>);
00087   printf(<span class="stringliteral">" took %e seconds.\n"</span>,t);
00088 
00090   t=<a class="code" href="group__nfftutil.html#ga0">nfft_second</a>();
00091   <a class="code" href="group__nfft.html#ga2">nfft_trafo</a>(&amp;p);
00092   t=<a class="code" href="group__nfftutil.html#ga0">nfft_second</a>()-t;
00093   <a class="code" href="group__nfftutil.html#ga45">nfft_vpr_complex</a>(p.<a class="code" href="structnfft__plan.html#o3">f</a>,K,<span class="stringliteral">"nfft, vector f (first few entries)"</span>);
00094   printf(<span class="stringliteral">" took %e seconds.\n"</span>,t);
00095 
00097   t=<a class="code" href="group__nfftutil.html#ga0">nfft_second</a>();
00098   <a class="code" href="group__nfft.html#ga1">ndft_adjoint</a>(&amp;p);
00099   t=<a class="code" href="group__nfftutil.html#ga0">nfft_second</a>()-t;
00100   <a class="code" href="group__nfftutil.html#ga45">nfft_vpr_complex</a>(p.<a class="code" href="structnfft__plan.html#o2">f_hat</a>,K,<span class="stringliteral">"adjoint ndft, vector f_hat (first few entries)"</span>);
00101   printf(<span class="stringliteral">" took %e seconds.\n"</span>,t);
00102 
00104   t=<a class="code" href="group__nfftutil.html#ga0">nfft_second</a>();
00105   <a class="code" href="group__nfft.html#ga3">nfft_adjoint</a>(&amp;p);
00106   t=<a class="code" href="group__nfftutil.html#ga0">nfft_second</a>()-t;
00107   <a class="code" href="group__nfftutil.html#ga45">nfft_vpr_complex</a>(p.<a class="code" href="structnfft__plan.html#o2">f_hat</a>,K,<span class="stringliteral">"adjoint nfft, vector f_hat (first few entries)"</span>); 
00108   printf(<span class="stringliteral">" took %e seconds.\n"</span>,t);
00109 
00111   <a class="code" href="group__nfft.html#ga15">nfft_finalize</a>(&amp;p);
00112 }
00113 
00114 <span class="keywordtype">int</span> <a class="code" href="flags_8c.html#a6">main</a>()
00115 {
00116   system(<span class="stringliteral">"clear"</span>);
00117   printf(<span class="stringliteral">"1) computing an one dimensional ndft, nfft and an adjoint nfft\n\n"</span>);
00118   simple_test_nfft_1d();
00119   getc(stdin);
00120 
00121   system(<span class="stringliteral">"clear"</span>); 
00122   printf(<span class="stringliteral">"2) computing a two dimensional ndft, nfft and an adjoint nfft\n\n"</span>);
00123   simple_test_nfft_2d();
00124 
00125   <span class="keywordflow">return</span> 1;
00126 }
</pre></div>    <hr size="1"/>
    Generated on 22 Jan 2007 by Doxygen 1.4.1
  </body>
</html>
